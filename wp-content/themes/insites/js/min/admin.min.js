function unlinkFile(e){jQuery("#resource_url").val("unlinked"),jQuery("#file_id").val(e)}function initialize_autocomplete_and_listener(e){array_autocompletes[e-1]=new google.maps.places.Autocomplete(document.getElementById("autocomplete"+e),{types:["geocode"]}),google.maps.event.addListener(array_autocompletes[e-1],"place_changed",function(){var a=array_autocompletes[e-1].getPlace();jQuery("#lat-autocomplete"+e).val(a.geometry.location.lat()),jQuery("#lng-autocomplete"+e).val(a.geometry.location.lng())})}function add_new_date_and_location(){var e,a=array_autocompletes.length+1;e=' <div class="panel panel-default">',e+='     <div class="div-date-location panel-heading clearfix">',e+='         <div class="btn btn-danger btn-xs pull-left" onclick="jQuery(this).parent().parent().remove();">',e+='             <i class="glyphicon glyphicon-remove"></i> Remove',e+="         </div>",e+="     </div>",e+='     <div class="panel-body">',e+='         <div class="form-group">',e+='             <label class="control-label col-lg-2 col-sm-2" for="date">Start Date</label>',e+='             <div class="col-lg-10 col-sm-10" data-date-format="mm-dd-yyyy">',e+='                 <input type="text" name="dates[]" id="date'+a+'" placeholder="mm-dd-yyyy" class="form-control datepicker" required="true"/>',e+="             </div>",e+="         </div>",e+='         <div class="form-group">',e+='             <label class="control-label col-lg-2 col-sm-2" for="end_dates">End Date</label>',e+='             <div class="col-lg-10 col-sm-10" data-date-format="mm-dd-yyyy">',e+='                 <input type="text" name="end_dates[]" id="end_date'+a+'" placeholder="mm-dd-yyyy" class="form-control datepicker" required="true"/>',e+="             </div>",e+="         </div>",e+='         <div class="form-group">',e+='             <label class="control-label col-lg-2 col-sm-2" for="festival_location[]">Festival Location</label>',e+='             <div class="col-lg-10 col-sm-10">',e+='                 <input class="form-control" type="text" name="festival_location[]" id="autocomplete'+a+'" onFocus="geolocate('+a+')" placeholder="Type Festival Location">',e+="             </div>",e+="         </div>",e+='         <input type="hidden" name="lat_autocompletes[]" id="lat-autocomplete'+a+'" value="">',e+='         <input type="hidden" name="lng_autocompletes[]" id="lng-autocomplete'+a+'" value="">',e+="         <hr/>",e+="     </div>",e+=" </div>",$("#date_and_location").append(e),initialize_datepickers(a),initialize_autocomplete_and_listener(a)}function add_new_organizer(){var e;e='<div class="form-group">',e+='    <div class="col-lg-10 col-sm-10 col-lg-offset-2 col-sm-offset-2">',e+='        <div class="col-lg-11 col-sm-11" style="padding:0px">',e+='            <select class="form-control" required="true" name="organizers[]">',e+=$(".select-users").html(),e+="            </select>",e+="        </div>",e+='        <div class="col-lg-1 col-sm-1">',e+='            <div class="btn btn-xs btn-danger" onclick="jQuery(this).parent().parent().parent().remove();">',e+='                <i class="glyphicon glyphicon-remove"></i>',e+="            </div>",e+="        </div>",e+="    </div>",e+="</div>",$("#organizers").append(e)}function geolocate(e){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){var l=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);array_autocompletes[e-1].setBounds(new google.maps.LatLngBounds(l,l))})}function isValidVideoUrl(e){return e.indexOf("vimeo")>=0||e.indexOf("youtube")>=0||e.indexOf("youtu.be")>=0?!0:!1}function validateVideoUrl(e){var a=e.value;!isValidVideoUrl(a)&&a.length>0?(jQuery("#publish").prop("disabled",!0),jQuery("#check-video-url").fadeIn()):(jQuery("#publish").prop("disabled",!1),jQuery("#check-video-url").fadeOut())}function addNewContributor(){var e,a=$("#contributors").children().length+1;e='<div class="panel panel-default">',e+='<div class="panel-heading clearfix">',e+='<div class="btn btn-danger btn-xs pull-left" onclick="jQuery(this).parent().parent().remove();">',e+='<i class="glyphicon glyphicon-remove"></i> Remove',e+="</div>",e+="</div>",e+='<div class="panel-body contributor-section">',e+='<div class="form-group">',e+='<label class="control-label col-lg-2 col-sm-2" for="authors">Author</label>',e+='<div class="col-lg-10 col-sm-10">',e+='<input class="form-control" type="text" name="authors[]" id="authors[]" placeholder="Type Author">',e+="</div>",e+="</div>",e+='<div class="form-group">',e+='<label class="control-label col-lg-2 col-sm-2" for="institution_name" >Institution Name</label>',e+='<div class="col-lg-10 col-sm-10">',e+='<input class="form-control" type="text" name="institution_name[]" id="institution_name[]" placeholder="Type Organization Name">',e+="</div>",e+="</div>",e+='<input type="hidden" name="festival_ids[]" value="">',e+='<input type="hidden" name="latitudes[]" value="">',e+='<input type="hidden" name="longitudes[]" value="">',e+='<input type="hidden" name="locations[]" value="">',e+='<input type="hidden" name="dates[]" value="">',e+="</div>",e+="</div>",$("#contributors").append(e),initialize_listener(a)}function deleteResourceFile(e){jQuery.ajax({url:"/api/resources/delete_file",method:"POST",data:jQuery.param({id:e}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){jQuery("#downloaded-file").fadeOut(),jQuery("#deleted-file-alert").fadeIn()}).error(function(e){alert(e.message)})}jQuery("#resource-draggable").on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),jQuery("#resource-draggable").on("dragleave",function(e){e.preventDefault(),e.stopPropagation()}),jQuery("#resource-draggable").on("drop",function(e){e.preventDefault(),e.stopPropagation(),alert("Dropped!")});var array_autocompletes=[];jQuery(function(){jQuery(".sortable").sortable();for(var e=1;e<=jQuery(".datepicker").length/2;e++)initialize_datepickers(e);for(var e=1;e<=jQuery(".autocomplete").length;e++)initialize_autocomplete_and_listener(e)}),jQuery(document).ready(function(){$("body").css("background-color","transparent"),$("#date").datepicker({dateFormat:"mm-dd-yy",onClose:function(){}})});