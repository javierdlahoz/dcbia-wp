function beforeSubmit(){window.File&&window.FileReader&&window.FileList&&window.Blob||alert("Please upgrade your browser, because your current browser lacks some new features we need!")}function OnProgress(e,r){jQuery("#progressbox").show().css({"font-size":"200%","margin-top":"-70px"}),jQuery("#progressbar").width(Math.round(e)+"%"),jQuery("#statustxt").html(Math.round(e)+"%"),e>50&&jQuery("#statustxt").css("color","#000"),100==e&&jQuery("#statustxt").html(r.name)}function afterSuccess(){jQuery("#drag-drop-text").text(""),jQuery("#url").prop("disabled",!0)}function getResourceType(){return jQuery("#type_planning_tools").is(":checked")===!0?"planning_tools":jQuery("#type_activities_and_programs").is(":checked")===!0?"activities_and_programs":jQuery("#type_collaborators").is(":checked")===!0?"collaborators":jQuery("#type_staff_and_human_resources").is(":checked")===!0?"staff_and_human_resources":jQuery("#type_marketing").is(":checked")===!0?"marketing":jQuery("#type_sponsorship").is(":checked")===!0?"sponsorship":jQuery("#type_evaluation_and_reporting").is(":checked")===!0?"evaluation_and_reporting":"uncategorized"}var options={target:"#output",beforeSubmit:beforeSubmit,success:afterSuccess,uploadProgress:OnProgress,resetForm:!1};jQuery("#url").change(function(){var e=jQuery("#url").val();e.length>0&&jQuery("#resource_file").prop("disabled",!0)}),jQuery("#resource_file").change(function(){var e=new FormData,r=new XMLHttpRequest,t=document.getElementById("resource_file"),s=jQuery("#file_id").val();return e.append("resource_file",t.files[0]),e.append("action_type","upload"),e.append("file_id",s),e.append("resource_type",getResourceType()),r.upload.addEventListener("progress",function(e){OnProgress(e.loaded/e.total*100,t.files[0])}),r.upload.addEventListener("load",afterSuccess,!1),r.open("POST","",!0),r.send(e),!1}),jQuery(function(){jQuery("#date").datepicker({dateFormat:"mm-dd-yy"})});