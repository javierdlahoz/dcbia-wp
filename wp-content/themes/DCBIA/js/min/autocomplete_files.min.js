function typeahead_source(e,t){jQuery.ajax({url:"/../wp-content/plugins/sf-festivals/modules/Festival/Handler/FestivalRestHandler.php",method:"POST",data:jQuery.param({action_type:"getFestivals",festival_expression:e}),ContentType:"application/x-www-form-urlencoded"}).success(function(e){return 1==e.length&&(e=[e[0]]),t(e)})}function typeahead_selected(e,t){var a=jQuery(this).closest(".contributor-section");a.find("input[name*='festival_ids']").val(t.id),a.find("input[name*='latitudes']").val(t.latitude),a.find("input[name*='longitudes']").val(t.longitude),a.find("input[name*='locations']").val(t.location),a.find("input[name*='dates']").val(t.date);for(var r="",n=0;n<t.organizers.length;n++)r+=0==n?t.organizers[n].name:"; "+t.organizers[n].name;a.find("input[name*='authors']").val(r)}function isRepeated(e){var t=!1;return jQuery("#showcase_resources #resource_to_add").each(function(){return jQuery(this).val()==e?(t=!0,!0):void 0}),t}jQuery("#existing_file").typeahead({minLength:3},{displayKey:"file_name_s",source:function(e,t){jQuery.ajax({url:"/../wp-content/plugins/sf-resources-manager/modules/Resource/Request/Helper/RestHelper.php",method:"POST",data:jQuery.param({action_type:"get_files",query:e}),ContentType:"application/x-www-form-urlencoded"}).success(function(e){return 1==e.length&&(e=[e[0][0]]),t(e)})}}).on("typeahead:selected",function(e,t){jQuery("#file_id").val(t.id)}),jQuery("#resource_to_add").typeahead({minLength:3},{displayKey:"resource_title",source:function(e,t){jQuery.ajax({url:"/../wp-content/plugins/sf-resources-manager/modules/Resource/Request/Helper/RestHelper.php",method:"POST",data:jQuery.param({action_type:"get_resources",query:e}),ContentType:"application/x-www-form-urlencoded"}).success(function(e){return 1==e.length&&(e=[e[0]]),t(e)})}}).on("typeahead:selected",function(e,t){isRepeated(t.resource_id)===!1&&(jQuery("#resource_template #resource_title_to_show").text(t.resource_title),jQuery("#resource_template #resource_to_add").val(t.resource_id),jQuery("#showcase_resources").append(jQuery("#resource_template").html())),jQuery("#resource_to_add").val("")}),jQuery(".typeahead-input").typeahead({minLength:3},{displayKey:"title",source:typeahead_source}).on("typeahead:selected",typeahead_selected);