angular.module("angular-wp").controller("MembershipController",function(e,t){e.users={},e.c=-1,e.usernameTaken=!1,e.isSuccess=!1,e.billing={},e.add=function(){e.c++;var t=e.c;e.users[t]={id:t,first_name:"",last_name:"",email:"",password:"",committee:""}},e.remove=function(t){delete e.users[t]},e.initialize=function(){e.users={}},e.setCity=function(){"object"==typeof e.member.city&&(e.member.state=e.member.city.address_components[1].short_name,e.member.city=e.member.city.address_components[0].long_name)},e.register=function(){var a="/api/member/register";e.member.additional_users=e.users,t({url:a,method:"POST",data:jQuery.param(e.member),headers:getContentTypes().form}).success(function(){e.isSuccess=!0,window.location="/checkout"})},e.isUsernameTaken=function(){if(e.member.username.length>4){var a="/api/member/check";t({url:a,method:"POST",data:jQuery.param({username:e.member.username}),headers:getContentTypes().form}).success(function(t){e.usernameTaken=t.is_taken})}},e.charge=function(){e.billing.expiration_date=e.billing.expiration_month+e.billing.expiration_year,e.billing.country="US";var a="/api/member/pay";t({url:a,method:"POST",data:jQuery.param(e.billing),headers:getContentTypes().form}).success(function(t){e.billing.status=t.status})},angular.element("#address").attr("g-places-autocomplete",""),angular.element("#address").attr("ng-model","address"),angular.element("#city").attr("ng-model","city"),angular.element("#state").attr("ng-model","state")});